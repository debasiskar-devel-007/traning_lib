<mat-card>
  <span class="searchblock">
    <span class="searchblockwrapper">
      <span>
        <mat-toolbar color="primary" style="justify-content: center; align-items: center;">
          <h2 class="headerSpan">Training Center</h2>
        </mat-toolbar>
      </span>
    </span>
  </span>
  <h1>{{ trainingCategoryName }}</h1>

  <mat-card-content class="trainingcentercls">
    <span fxLayout="row" class="row" fxLayoutAlign="space-between center">
      <span fxLayout="column" class="column columnleft" class="leftside">
        <span fxLayout="row" class="rowinner" *ngFor="let item of allLessonData ; let i=index;">
          <mat-accordion (click)="currentlesson=item._id">
            <mat-expansion-panel [disabled]="item.is_done==true?false:true" [expanded]="item.expanded==true?true:false"
              (opened)="item.expanded = true" (closed)="item.expanded = false">
              <mat-expansion-panel-header>
                <mat-panel-title>
                  {{item.lession_title}} {{item.is_done}} --- {{item.expanded}} 
                </mat-panel-title>
                <mat-panel-description>

                </mat-panel-description>
              </mat-expansion-panel-header>

              <div *ngIf="item.mediaType=='html'">

                <p [innerHtml]="item.typeHtml"></p>
              </div>

              <mat-card class="example-card" *ngIf="item.mediaType=='image'">
                <img mat-card-image src="{{item.fileType[0].basepath}}{{item.fileType[0].fileservername}}"
                  alt="{{item.lession_title}}" />
              </mat-card>
              <mat-card class="example-card" *ngIf="item.mediaType=='video' && item.expanded==true ">

                <video width="640" height="360" autoplay (ended)="videoended(item,i)">
                  <source src="{{item.fileType[0].basepath}}{{item.fileType[0].fileservername}}" type="video/mp4">
                  Your browser does not support the video tag.
                </video>

              </mat-card>
              <mat-card class="example-card" *ngIf="item.mediaType=='audio' ">

                <audio width="640" height="360" (ended)="audioended(item,i)" controls>
                  <source src="{{item.fileType[0].basepath}}{{item.fileType[0].fileservername}}" type="audio/mpeg">
                  Your browser does not support the audio tag.
                </audio>
              </mat-card>
              <mat-card class="example-card" *ngIf="item.mediaType=='file' ">
                <mat-carousel timings="250ms ease-in" [autoplay]="true" interval="15000" [loop]="true"
                  [maintainAspectRatio]="true" [hideArrows]="false" [hideIndicators]="false" [useKeyboard]="true"
                  [useMouseWheel]="false" orientation="ltr">
                  <mat-carousel-slide #matCarouselSlide *ngFor="let slide of item.convertedimages; let i1 = index"
                    [image]="slide" overlayColor="#00000040" [hideOverlay]="false">
                  </mat-carousel-slide>
                </mat-carousel>
              </mat-card>
              <ng-container
                *ngIf="item.test_associate_training=='No' && item.mediaType != 'audio' && item.mediaType != 'video'">
                <button mat-button type="button" class="submitbtn" color="primary"
                  (click)="addMarkedData(item._id,item.associated_training,i)">Mark As Done</button>
              </ng-container>
              <ng-container
                *ngIf="item.test_associate_training=='Yes' && item.mediaType != 'audio' && item.mediaType != 'video'">
                <button mat-button type="button" class="submitbtn" color="primary"
                  (click)="questionDetails(item._id,i)">Take A Quiz</button>
                <mat-progress-bar *ngIf="progressLoader" mode="indeterminate"></mat-progress-bar>
              </ng-container>
            </mat-expansion-panel>
          </mat-accordion>
        </span>
      </span>



      <span fxLayout="column" class="column" class="rightside">
        <h2>You Have Completed {{ dividend }}/{{divisor}} Lessons</h2>
        <mat-progress-bar *ngIf="percentageprogressLoader " mode="determinate" value="{{ reportPercentage }}">
        </mat-progress-bar>
        <h3>{{ reportPercentage }}%</h3>
        <mat-list>

          <ng-container *ngFor="let item of trainingCategoryList;let i = index">

            <mat-list-item class="selectedclass" *ngIf="item.childcat.length>=1">{{item.catagory_name}}</mat-list-item>
            <div class="pointer">
              <mat-list-item [ngClass]="{'class1': item.percentage>1,
                                         'class2': item.percentage===100,
                                         'class3':item.percentage ===0 }" *ngIf="item.childcat.length==0"
                class="selectedclass" (click)="nochildclick(item._id)">{{item.catagory_name}}
                ({{item.done}}/{{item.count}})</mat-list-item>
              <div *ngIf="item.count != null && item.childcat.length==0">
                <mat-progress-bar *ngIf="percentageprogressLoader " mode="determinate" value="{{item.percentage}}">
                </mat-progress-bar>
                <span style="font-size: 20px;font-weight: bold;">{{ item.percentage }}%</span>
              </div>


            </div>

            <mat-list style="margin-left:30px;">
              <div>
                <ng-container *ngIf="item.childcat!=null && item.childcat.length>0">
                  <mat-list *ngFor=" let childitem of item.childcat;let i1 = index">
                    <mat-list-item class="pointer" [ngClass]="{'class1': item.childpercentage[i1]>1,
                                         'class2': item.childpercentage[i1]===100,
                                         'class3':item.childpercentage[i1] ===0 }"
                      (click)="childcatclick(item.childid[1],item.childcat[1])">
                      {{ childitem }} (
                      <ng-container *ngIf="item.childdone !=null && item.childdone[i1]!=null">
                        {{item.childdone[i1]}}/
                      </ng-container>
                      {{item.childcount[i1]}})
                    </mat-list-item>


                    <div *ngIf="item.childdone !=null && item.childdone[i1]!=null">
                      <br />
                      <mat-progress-bar *ngIf="item.childdone !=null && item.childdone[i1]!=null " mode="determinate"
                        value="{{item.childpercentage[i1]}}"></mat-progress-bar>
                      <span style="font-size: 20px;font-weight: bold;"> {{item.childpercentage[i1]}}%</span>
                    </div>



                  </mat-list>
                </ng-container>

              </div>
            </mat-list>
          </ng-container>
        </mat-list>
      </span>

    </span>
  </mat-card-content>
</mat-card>