<!-- <mat-form-field> -->
    <!-- <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Filter"> -->
  <!-- </mat-form-field> -->
  <mat-card>
    <span class="searchblock">
      <span class="searchblockwrapper">
          <span>
    <mat-toolbar color="primary" style="justify-content: center; align-items: center;">
        <h2 class="headerSpan">List Lesson Management</h2>
      </mat-toolbar>
          </span>
          <span>
      <mat-toolbar class="buttonsetToolbar">
        <button class="singleButton" mat-raised-button color="primary" (click)="addButton()" >
          <i class="material-icons">add</i>  Add Lesson</button>
    </mat-toolbar>
  </span>
      </span>
    </span>

    <span class="searchbar" >

    <mat-form-field class="searchdiv" >
      <input matInput placeholder="Search by Lesson Name "
        [(ngModel)]="lessonName" >
    </mat-form-field>

   
    <mat-form-field class="searchdiv" >
      <mat-select placeholder="Search by Associate Training" [(ngModel)]="training" (selectionChange)="filterByTrainingName('associated_training_search_regex', $event.value)">
        <mat-option [value]=0>Select a Lesson</mat-option>
        <mat-option *ngFor="let val of allLessonData;" value="{{ val.catagory_name }}">{{ val.catagory_name }}</mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field class="searchdiv">
      <mat-select placeholder="Sort by Test availability" [(ngModel)]="testAvailability" (selectionChange)="filterByTrainingName('test_associate_training_search_regex', $event.value)">
        <mat-option value=0>Select a Test availability</mat-option>
        <mat-option value="yes">Yes</mat-option>
        <mat-option value="no">No</mat-option>
      </mat-select>
    </mat-form-field>
    <button class="submitbtn" mat-raised-button color="primary" type="button" (click)="filterByTrainingName('lession_title_search_regex', lessonName)">Search</button>

    <button class="submitbtn" mat-raised-button color="primary" type="button" (click)="resetSearch()">Reset</button>

    </span>

    <ng-container *ngIf="selection.selected.length!=null && selection.selected.length>0">
      <span class="multipledeleteandupdatebuttan" >

      <button mat-raised-button (click)="deleteAllRecordModalFunction()"> Delete </button>
      <button mat-raised-button (click)="statusUpdateAllRecords()"> Update Status </button>

      </span>
    </ng-container>
  <div class="mat-elevation-z8">
    <table mat-table [dataSource]="dataSource" matSort>
    <!-- Checkbox Column -->
    <ng-container matColumnDef="select" >
      <th mat-header-cell *matHeaderCellDef>
        <mat-checkbox (change)="$event ? masterToggle() : null"
        [checked]="selection.hasValue() && isAllSelected()"
        [indeterminate]="selection.hasValue() && !isAllSelected()"
        [aria-label]="checkboxLabel()"> </mat-checkbox>
      </th>
      <td mat-cell *matCellDef="let row" data-label = "select">
        <mat-checkbox (click)="$event.stopPropagation()"
        (change)="$event ? selection.toggle(row) : null"
        [checked]="selection.isSelected(row)"
        [aria-label]="checkboxLabel(row)"></mat-checkbox>
      </td>
    </ng-container>

   
      <ng-container matColumnDef="lession_title">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Lesson Title </th>
        <td mat-cell *matCellDef="let row" title="Lesson Title"> {{row.lession_title}} </td>
      </ng-container>
      <ng-container matColumnDef="no">
        <th mat-header-cell *matHeaderCellDef> No. </th>
        <td mat-cell *matCellDef="let element; let i = index;" title= "No"> {{ i + 1 }} </td>
      </ng-container>
      <!-- Progress Column -->
      <ng-container matColumnDef="description">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Description </th>
        <td mat-cell *matCellDef="let row" title="Description"> {{row.description}} </td>
      </ng-container>
  
      <!-- Name Column -->
      <ng-container matColumnDef="test_associate_training">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Has Test</th>
        <td mat-cell *matCellDef="let row" title="Has Test"> {{row.test_associate_training}} </td>
      </ng-container>
  
      <!-- Color Column -->
      <ng-container matColumnDef="mediaType">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Training Type </th>
        <td mat-cell *matCellDef="let row" title="Training Type"> {{row.mediaType}} </td>
      </ng-container>

      <ng-container matColumnDef="associated_training">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Associated Training </th>
        <td mat-cell *matCellDef="let row" title=" Associated Training"> {{row.associated_training}} </td>
      </ng-container>

      <ng-container matColumnDef="prerequisite_lession">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Prerequisite Lesson </th>
        <td mat-cell *matCellDef="let row" title=" Prerequisite Lesson"> {{row.prerequisite_lession}} </td>
      </ng-container>

      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Status </th>
        <td mat-cell *matCellDef="let row" title="Status"> {{row.status}} </td>
      </ng-container>
      <ng-container matColumnDef="deleteRecord" >
        <th mat-header-cell *matHeaderCellDef> Action </th>
        <td mat-cell *matCellDef="let element; let i = index;" data-label = "Action">
          <span class="buttons_ro">
                    <span class="pointer" (click)="deleteRecord(element._id, i);">
            <i class="material-icons">
              delete_outline
              </i>
          </span>         
         <span class="pointer" (click)="routerFunction(element._id)"> 
           <i class="material-icons">
            edit
          </i>
         </span>
         <span class="pointer" *ngIf="element.test_associate_training == 'Yes'" (click)="manageQuiz(element._id)">
          <i class="material-icons">
            link
            </i>
         </span>

         <span class="pointer" (click)="statusUpdateModal(element._id,i)">
          <i class="material-icons">
            toggle_on
            </i>
         </span>
         
        </span>
        </td>
      </ng-container>
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;">
      </tr>

    </table>
  
    <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator>
  </div>
</mat-card>
