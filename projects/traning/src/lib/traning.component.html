<mat-card class="main-mat-card admingeneralcls">
    <span class="searchblock">
        <span class="searchblockwrapper">
            <span>
    <h1 class="header">{{ headerText }}</h1>
            </span>
        </span>
    </span>
    <form novalidate (ngSubmit)="formsubmit()" class="formclass">
        <ng-container [formGroup]="dataForm" *ngFor="let item of formdataval; let i=index;">
            <div>
                <!-- <mat-label *ngIf="item.inputtype!='radio'">{{item.label}} </mat-label> -->

                <mat-form-field *ngIf="item.inputtype == 'text' || item.inputtype == 'password'">
                    <input matInput [type]="item.inputtype" [placeholder]="item.placeholder"
                        [formControlName]="[item.name]" (keyup)="issubmit=0">

                    <mat-error
                        *ngIf="dataForm.controls[item.name]!=null &&  item.validationrule!=null && !dataForm.controls[item.name].valid && dataForm.controls[item.name].touched && issubmit==1">
                        {{item.label}}
                        {{item.validationerrormsg}}</mat-error>
                </mat-form-field>
            </div>
            <div>
                <mat-form-field *ngIf="item.inputtype == 'textarea'">
                    <textarea matInput [placeholder]="item.placeholder" [formControlName]="[item.name]"
                        (keyup)="issubmit=0"></textarea>

                    <mat-error
                        *ngIf="dataForm.controls[item.name]!=null &&  item.validationrule!=null && !dataForm.controls[item.name].valid && dataForm.controls[item.name].touched && issubmit==1">
                        {{item.label}}
                        {{item.validationerrormsg}}</mat-error>
                </mat-form-field>
            </div>
            <div>
                <mat-form-field *ngIf="item.inputtype == 'email'">
                    <input matInput pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$" [name]="item.name"
                        [type]="item.inputtype" [placeholder]="item.placeholder" [formControlName]="[item.name]"
                        (keyup)="issubmit=0">


                    <mat-error
                        *ngIf="dataForm.controls[item.name]!=null &&  item.validationrule!=null && !dataForm.controls[item.name].valid && dataForm.controls[item.name].touched && issubmit==1">
                        {{item.label}}
                        {{item.validationerrormsg}}</mat-error>
                </mat-form-field>
            </div>
            <div>
                <mat-form-field *ngIf="item.inputtype == 'url'">
                    <input matInput
                        pattern="^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)?[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?|^((http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)?([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$"
                        [name]="item.name" [type]="item.inputtype" [placeholder]="item.placeholder"
                        [formControlName]="[item.name]" (keyup)="issubmit=0">

                    <mat-error
                        *ngIf="dataForm.controls[item.name]!=null &&  item.validationrule!=null && !dataForm.controls[item.name].valid && dataForm.controls[item.name].touched && issubmit==1">
                        {{item.label}}
                        {{item.validationerrormsg}}</mat-error>
                </mat-form-field>
            </div>
            <div class="checkboxnew">
                <mat-label *ngIf="item.inputtype!='radio'">{{item.label}}:</mat-label>
                <mat-checkbox *ngIf="item.inputtype == 'checkbox'"  [ngClass]="item.class"
                    [formControlName]="[item.name]" (keyup)="issubmit=0" [(ngModel)]="checked"
                    ></mat-checkbox>
            </div>



            <div>
                <span *ngIf="item.inputtype=='radio'">
                    <label>{{item.label}}: </label>
                    <mat-radio-group [formControlName]="[item.name]">
                        <mat-radio-button type="radio" *ngFor="let val of item.value" [name]="item.name" [value]="val"
                            (keyup)="issubmit=0" [ngClass]="item.class">{{val}} {{item.valuelabel}}</mat-radio-button>
                    </mat-radio-group>
                </span>
            </div>
            
            <div>
                <!-- <p>{{item.defaultchoice}}</p> -->
                <mat-form-field *ngIf="item.inputtype == 'select'">
                    <mat-select [placeholder]="item.defaultchoice" [formControlName]="item.name"
                        (selectionChange)="getMediaTypeVal($event.value,item.name);" value="">
                        <mat-option value="" selected>{{item.defaultchoice}}</mat-option>
                        <mat-option *ngFor="let selectval of item.sourceval" value="{{selectval[item.selectid]}}"
                            (keyup)="issubmit=0">
                            {{selectval[item.selectvalue]}}</mat-option>
                    </mat-select>
                    <mat-error
                        *ngIf="dataForm.controls[item.name]!=null &&  item.validationrule!=null && !dataForm.controls[item.name].valid && dataForm.controls[item.name].touched && issubmit==1">
                        {{item.label}}
                        {{item.validationerrormsg}}</mat-error>
                </mat-form-field>
            </div>
            <mat-progress-bar *ngIf="progressLoader && item.name =='associated_training'" mode="indeterminate"></mat-progress-bar>

        </ng-container>

      <ng-container *ngIf="dnaFlag==true">
        <div>
            <span>
                <mat-checkbox (change)="getchkboxval($event.checked)" [(ngModel)]="chkboxval" [ngModelOptions]="{standalone: true}" >Has Lesson plan?</mat-checkbox>
            </span>
        </div>
        <div *ngIf="hasLessonVal == true">
            <mat-form-field>
                <mat-label>Select A One</mat-label>
                <mat-select [(ngModel)]="lessonplanValue" [ngModelOptions]="{standalone: true}" >
                  <mat-option  value="purchasable">Purchasable </mat-option>
                  <mat-option  value="not_purchasable">Not Purchasable </mat-option>
                </mat-select>
              </mat-form-field>
        </div>
    </ng-container>

        <div *ngIf="mediaTypeValue == 'image' || mediaTypeValue == 'video' || mediaTypeValue == 'audio'  || mediaTypeValue == 'file' ">
           <h4>Please Add Single File</h4>
         <!-- file uploader start here -->
            <lib-file-upload [config]="uploadConfigData"></lib-file-upload>
            
            <mat-form-field>
                <input type="text" matInput  placeholder="Title" [(ngModel)]="title" [ngModelOptions]="{standalone: true}">
                <mat-icon matSuffix>title</mat-icon>
            </mat-form-field>

            <mat-form-field>
                <textarea type="text" matInput 
                    placeholder="Description" [(ngModel)]="description" [ngModelOptions]="{standalone: true}"></textarea>
                <mat-icon matSuffix>description</mat-icon>
            </mat-form-field>
      <!-- file uploader end here -->

            <ng-container *ngIf="mediaTypeValue == 'image' && imagePath != null">
                <mat-card class="example-card"  >
                    <span class="closecard"  class="pointer" *ngIf="mediaTypeValue == 'image'" (click)="clear()"><i class="material-icons">clear</i></span>
                    <img mat-card-image src="{{ imagePath }}"
                       />
                  </mat-card>
            </ng-container>
            <ng-container *ngIf="mediaTypeValue == 'video' && imagePath != null && audioVideoFlag==true" >
               <div style="margin: 0 auto;display: block;">
                <mat-card class="example-card"  >         
                    <span class="closecard"  class="pointer" *ngIf="mediaTypeValue == 'video'" (click)="clear()"><i class="material-icons">clear</i></span>
                 <video width="640" height="360" controls >
                    <source src="{{ imagePath }}" type="video/mp4">
                    Your browser does not support the video tag.
                  </video>
                </mat-card>
               </div>
                
            </ng-container>
            <ng-container *ngIf="mediaTypeValue == 'audio' && imagePath != null && audioVideoFlag==true">
               
                <div style="margin: 0 auto;display: block;">
                 <mat-card class="example-card"  >
                    <span class="closecard"  class="pointer" *ngIf="mediaTypeValue == 'audio'" (click)="clear()"><i class="material-icons">clear</i></span>
                <audio controls >
                   
                    <source src="{{ imagePath }}" type="audio/ogg">
                    <source src="{{ imagePath }}" type="audio/mpeg">
                  Your browser does not support the audio element.
                  </audio>
            </mat-card>
        </div>

            </ng-container>
        </div>
       
       
        <div *ngIf="mediaTypeValue == 'html' || mediaTypeValue == 'image' || mediaTypeValue == 'video' || mediaTypeValue == 'audio'  || mediaTypeValue == 'file' ">
            <ck-editor [config]="editorconfig"  [(ngModel)]="htmType" [ngModelOptions]="{standalone: true}">
            </ck-editor>
        </div>
        <button class="submitbtn" mat-raised-button color="primary" type="submit">{{ buttonText }}</button>
        <button class="submitbtn" mat-raised-button color="primary" type="reset" (click)="cancelButton()">Cancel</button>
    </form>
</mat-card>